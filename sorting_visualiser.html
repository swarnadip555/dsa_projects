<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Swarnadip's Sorting Visualizer</title>
  <style>
    :root{
      --deep-blue: #00263a;
      --accent: #0066ff;
      --accent-2: #7cc3ff;
      --black: #0b0b0d;
      --white: #ffffff;
      --muted: #94a3b8;
      --glass: rgba(255,255,255,0.06);
    }
    /* Theme tokens for dark and light */
    html[data-theme='dark']{
      --bg: var(--black);
      --panel: #071427;
      --text: #e6eef8;
      --card: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      --bar: linear-gradient(180deg, var(--accent), var(--accent-2));
      --compare: #ffad33;
      --swap: #ff4d4f;
      --sorted: #28c76f;
    }
    html[data-theme='blue']{
      --bg: var(--deep-blue);
      --panel: rgba(255,255,255,0.02);
      --text: var(--white);
      --card: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      --bar: linear-gradient(180deg, #0ea5e9, #0369a1);
      --compare: #ffd166;
      --swap: #ff6b6b;
      --sorted: #34d399;
    }
    html[data-theme='light']{
      --bg: #f6f9ff;
      --panel: #ffffff;
      --text: #071427;
      --card: linear-gradient(180deg, #ffffff, #f8fafc);
      --bar: linear-gradient(180deg, #3b82f6, #60a5fa);
      --compare: #f59e0b;
      --swap: #ef4444;
      --sorted: #10b981;
    }

    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
    body{margin:0;background:var(--bg);color:var(--text);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}

    .app{width:100%;max-width:1100px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:46px;height:46px;border-radius:10px;background:var(--panel);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(0,0,0,0.25)}
    .logo svg{width:28px;height:28px}
    h1{font-size:20px;margin:0}
    .subtitle{font-size:12px;color:var(--muted)}

    .controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.35);min-width:260px}
    .row{display:flex;gap:10px;align-items:center}
    select,input[type=range]{appearance:none;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--text)}
    button{background:transparent;border:0;padding:8px 12px;border-radius:8px;color:var(--text);cursor:pointer;display:inline-flex;align-items:center;gap:8px}
    button.primary{background:linear-gradient(90deg,#0ea5e9,#0369a1);color:white;box-shadow:0 6px 18px rgba(3,105,161,0.25)}
    button.ghost{border:1px solid rgba(255,255,255,0.06)}
    .icon{width:16px;height:16px;display:inline-block}
    .small{font-size:13px}

    /* Visual area */
    .visual{margin-top:16px;border-radius:12px;padding:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));min-height:360px;display:flex;flex-direction:column}
    .visual-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .bars{flex:1;display:flex;align-items:flex-end;gap:2px;height:320px}
    .bar{flex:1;border-top-left-radius:6px;border-top-right-radius:6px;background:var(--bar);min-width:6px;transition:height 180ms ease, background 180ms ease, transform 180ms ease}
    .bar.small{min-width:2px}

    .legend{display:flex;gap:12px;align-items:center}
    .legend div{display:flex;gap:6px;align-items:center;font-size:13px}
    .dot{width:12px;height:12px;border-radius:3px}

    footer{margin-top:12px;color:var(--muted);font-size:13px;text-align:center}

    /* Responsive */
    @media (max-width:700px){
      .controls{flex-direction:column;align-items:stretch}
      .card{width:100%}
      .bars{height:220px}
    }
  </style>
</head>
<body data-theme="blue">
  <div class="app">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden>
          <!-- simple monogram -->
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="3" width="18" height="18" rx="4" fill="url(#g)"/></svg>
        </div>
        <div>
          <h1>Swarnadip's Sorting Visualizer:</h1>
          <div class="subtitle">Modern UI ‚Ä¢ Algorithms visualized</div>
        </div>
      </div>
      <div class="controls">
        <div class="card">
          <div class="row" style="margin-bottom:8px">
            <label class="small">Algorithm</label>
            <select id="algoSelect" aria-label="Choose algorithm">
              <option>Bubble Sort</option>
              <option>Selection Sort</option>
              <option>Insertion Sort</option>
              <option>Merge Sort</option>
              <option>Quick Sort</option>
              <option>Heap Sort</option>
            </select>
            <div class="small" id="complexity">Time: O(n¬≤)</div>
          </div>
          <div class="row">
            <label class="small">Size</label>
            <input id="sizeRange" type="range" min="10" max="160" value="60">
            <label class="small">Speed</label>
            <input id="speedRange" type="range" min="1" max="500" value="100">
          </div>
          <div class="row" style="margin-top:8px;justify-content:space-between">
            <div style="display:flex;gap:8px">
              <button id="newArrayBtn" class="ghost" title="Generate New Array"> 
                <!-- refresh icon -->
                <span class="icon">üîÅ</span> New Array
              </button>
              <button id="sortBtn" class="primary"> <span class="icon">‚ñ∂Ô∏è</span> Sort</button>
              <button id="pauseBtn" class="ghost"> <span class="icon">‚è∏Ô∏è</span> Pause</button>
            </div>
            <div style="display:flex;gap:8px;align-items:center">
              <button id="themeBlue" class="ghost" title="Blue Theme">üîµ</button>
              <button id="themeDark" class="ghost" title="Dark Theme">‚ö´</button>
              <button id="themeLight" class="ghost" title="Light Theme">‚ö™</button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <section class="visual card">
      <div class="visual-top">
        <div class="row small"><div id="status">Ready</div></div>
        <div class="legend">
          <div><span class="dot" id="dot-compare" style="background:var(--compare)"></span>Comparing</div>
          <div><span class="dot" id="dot-swap" style="background:var(--swap)"></span>Swapping</div>
          <div><span class="dot" id="dot-sorted" style="background:var(--sorted)"></span>Sorted</div>
        </div>
      </div>

      <div class="bars" id="bars"></div>
      <footer>Made  by Swarnadip ‚Äî Algorithms implemented in JavaScript following  DSA logic</footer>
    </section>
  </div>

  <script>
    // --- Utility helpers ---
    const $ = (sel) => document.querySelector(sel);
    const sleep = (ms) => new Promise(res => setTimeout(res, ms));

    // --- App state ---
    let array = [];
    let isSorting = false;
    let isPaused = false;
    let currentAnimations = [];
    let animationIndex = 0;

    // elements
    const barsEl = $('#bars');
    const sizeRange = $('#sizeRange');
    const speedRange = $('#speedRange');
    const algoSelect = $('#algoSelect');
    const complexityEl = $('#complexity');
    const statusEl = $('#status');

    // complexity map
    const complexities = {
      'Bubble Sort': 'O(n¬≤)',
      'Selection Sort': 'O(n¬≤)',
      'Insertion Sort': 'O(n¬≤)',
      'Merge Sort': 'O(n log n)',
      'Quick Sort': 'O(n log n) average',
      'Heap Sort': 'O(n log n)'
    };

    // init
    function init(){
      setTheme('blue');
      generateArray();
      updateComplexity();
    }

    // themes
    function setTheme(t){
      document.documentElement.setAttribute('data-theme', t);
    }
    $('#themeBlue').onclick = () => setTheme('blue');
    $('#themeDark').onclick = () => setTheme('dark');
    $('#themeLight').onclick = () => setTheme('light');

    // create array
    function generateArray(){
      if(isSorting) return;
      const n = parseInt(sizeRange.value,10);
      array = Array.from({length:n}, ()=> Math.floor(Math.random()*300)+8);
      renderArray();
      statusEl.textContent = 'Array generated ‚Äî size '+n;
    }

    function renderArray(highlights={}){
      barsEl.innerHTML = '';
      const max = Math.max(...array);
      const minWidth = Math.max(2, Math.floor(900/array.length));
      for(let i=0;i<array.length;i++){
        const h = Math.round((array[i]/(max||1))*100);
        const bar = document.createElement('div');
        bar.className = 'bar';
        bar.style.height = (h*2.6)+'px';
        bar.style.flex = '1 1 '+(minWidth+'px');
        if(highlights.compare && highlights.compare.includes(i)) bar.style.background = 'var(--compare)';
        else if(highlights.swap && highlights.swap.includes(i)) bar.style.background = 'var(--swap)';
        else if(highlights.sorted && highlights.sorted.includes(i)) bar.style.background = 'var(--sorted)';
        else bar.style.background = 'var(--bar)';
        barsEl.appendChild(bar);
      }
    }

    // --- Sorting algorithms (JS implementations written in a C++-style) ---
    // Each algorithm returns an array of animations: {type:'compare'|'swap'|'overwrite', a, b, value?}

    function bubbleSortAnim(arr){
      const animations = [];
      const a = arr.slice();
      const n = a.length;
      for(let i=0;i<n-1;i++){
        for(let j=0;j<n-i-1;j++){
          animations.push({type:'compare', a:j, b:j+1});
          if(a[j] > a[j+1]){
            animations.push({type:'swap', a:j, b:j+1});
            const tmp = a[j]; a[j]=a[j+1]; a[j+1]=tmp;
          }
        }
      }
      return animations;
    }

    function selectionSortAnim(arr){
      const animations = [];
      const a = arr.slice();
      const n = a.length;
      for(let i=0;i<n;i++){
        let minIdx = i;
        for(let j=i+1;j<n;j++){
          animations.push({type:'compare', a:minIdx, b:j});
          if(a[j] < a[minIdx]) minIdx = j;
        }
        if(minIdx !== i){
          animations.push({type:'swap', a:i, b:minIdx});
          const tmp = a[i]; a[i]=a[minIdx]; a[minIdx]=tmp;
        }
      }
      return animations;
    }

    function insertionSortAnim(arr){
      const animations = [];
      const a = arr.slice();
      const n = a.length;
      for(let i=1;i<n;i++){
        let key = a[i];
        let j = i-1;
        while(j>=0 && a[j] > key){
          animations.push({type:'compare', a:j, b:j+1});
          animations.push({type:'overwrite', a:j+1, value:a[j]});
          a[j+1] = a[j];
          j--;
        }
        animations.push({type:'overwrite', a:j+1, value:key});
        a[j+1] = key;
      }
      return animations;
    }

    function mergeSortAnim(arr){
      const animations = [];
      const a = arr.slice();
      function merge(l, m, r){
        const left = a.slice(l, m+1);
        const right = a.slice(m+1, r+1);
        let i=0,j=0,k=l;
        while(i<left.length && j<right.length){
          animations.push({type:'compare', a:(l+i), b:(m+1+j)});
          if(left[i] <= right[j]){
            animations.push({type:'overwrite', a:k, value:left[i]});
            a[k++] = left[i++];
          } else {
            animations.push({type:'overwrite', a:k, value:right[j]});
            a[k++] = right[j++];
          }
        }
        while(i<left.length){
          animations.push({type:'overwrite', a:k, value:left[i]}); a[k++]=left[i++];
        }
        while(j<right.length){
          animations.push({type:'overwrite', a:k, value:right[j]}); a[k++]=right[j++];
        }
      }
      function sort(l,r){
        if(l>=r) return;
        const m = Math.floor((l+r)/2);
        sort(l,m);
        sort(m+1,r);
        merge(l,m,r);
      }
      sort(0, a.length-1);
      return animations;
    }

    function quickSortAnim(arr){
      const animations = [];
      const a = arr.slice();
      function partition(low, high){
        const pivot = a[high];
        let i = low-1;
        for(let j=low;j<high;j++){
          animations.push({type:'compare', a:j, b:high});
          if(a[j] < pivot){
            i++;
            animations.push({type:'swap', a:i, b:j});
            const tmp = a[i]; a[i]=a[j]; a[j]=tmp;
          }
        }
        animations.push({type:'swap', a:i+1, b:high});
        const t = a[i+1]; a[i+1]=a[high]; a[high]=t;
        return i+1;
      }
      function qs(low,high){
        if(low<high){
          const p = partition(low,high);
          qs(low,p-1);
          qs(p+1,high);
        }
      }
      qs(0, a.length-1);
      return animations;
    }

    function heapSortAnim(arr){
      const animations = [];
      const a = arr.slice();
      const n = a.length;
      function heapify(n,i){
        let largest = i;
        const l = 2*i+1; const r = 2*i+2;
        if(l<n){ animations.push({type:'compare', a:l, b:largest}); if(a[l]>a[largest]) largest=l; }
        if(r<n){ animations.push({type:'compare', a:r, b:largest}); if(a[r]>a[largest]) largest=r; }
        if(largest !== i){ animations.push({type:'swap', a:i, b:largest}); const tmp=a[i]; a[i]=a[largest]; a[largest]=tmp; heapify(n,largest); }
      }
      for(let i=Math.floor(n/2)-1;i>=0;i--) heapify(n,i);
      for(let i=n-1;i>0;i--){ animations.push({type:'swap', a:0, b:i}); const t=a[0]; a[0]=a[i]; a[i]=t; heapify(i,0); }
      return animations;
    }

    // map
    const algoMap = {
      'Bubble Sort': bubbleSortAnim,
      'Selection Sort': selectionSortAnim,
      'Insertion Sort': insertionSortAnim,
      'Merge Sort': mergeSortAnim,
      'Quick Sort': quickSortAnim,
      'Heap Sort': heapSortAnim
    };

    // play animations with pause/resume support
    async function playAnimations(animations){
      if(!animations || animations.length===0) return;
      isSorting = true; isPaused=false; animationIndex=0;
      statusEl.textContent = 'Sorting...';
      const speed = parseInt(speedRange.value,10);
      const ms = Math.max(1, 500 - speed);
      const sortedIndices = new Set();

      while(animationIndex < animations.length){
        if(!isSorting) break; // stopped externally
        if(isPaused){ statusEl.textContent = 'Paused'; await new Promise(res=>{ const intr=setInterval(()=>{ if(!isPaused){ clearInterval(intr); res(); } }, 120); }); }

        const anim = animations[animationIndex++];
        if(anim.type === 'compare'){
          renderArray({compare:[anim.a, anim.b], sorted:Array.from(sortedIndices)});
        } else if(anim.type === 'swap'){
          const tmp = array[anim.a]; array[anim.a] = array[anim.b]; array[anim.b] = tmp;
          renderArray({swap:[anim.a, anim.b], sorted:Array.from(sortedIndices)});
        } else if(anim.type === 'overwrite'){
          array[anim.a] = anim.value;
          renderArray({swap:[anim.a], sorted:Array.from(sortedIndices)});
        }
        await sleep(ms);
      }

      // mark all sorted
      if(isSorting){
        renderArray({sorted: array.map((_,i)=>i)});
        statusEl.textContent = 'Sorted ‚úÖ';
      }
      isSorting=false;
    }

    // controls
    $('#newArrayBtn').onclick = () => { generateArray(); };
    $('#sortBtn').onclick = async () => {
      if(isSorting) return;
      const algo = algoSelect.value;
      updateComplexity();
      const anims = algoMap[algo](array);
      currentAnimations = anims;
      await playAnimations(anims);
    };
    $('#pauseBtn').onclick = () => {
      if(!isSorting) return;
      isPaused = !isPaused;
      $('#pauseBtn').textContent = isPaused? '‚ñ∂Ô∏è Resume' : '‚è∏Ô∏è Pause';
    };

    sizeRange.oninput = () => { generateArray(); };
    algoSelect.onchange = updateComplexity;

    function updateComplexity(){
      const algo = algoSelect.value;
      complexityEl.textContent = 'Time: ' + (complexities[algo] || '‚Äî');
    }

    // initial render
    init();

    // expose for debug
    window._sv = { generateArray, array };
  </script>
</body>
</html>
